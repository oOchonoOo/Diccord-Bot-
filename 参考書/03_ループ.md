# 🤖 Discord Bot：ループ機能

## 🔰 初めに  
※このコードは、書籍『📘動かしながら学ぶ Python Discord Bot を作ってプログラミングの基礎を学ぼう』（著：クジラ飛行机）を参考にしながら、  
自分なりに改良・学習用として実装したものです。

---

## 🛠 作成過程  
今回は、 `!loop （特定の数）` という形でメッセージを送信したら、1からその要素数までをカウントダウンする機能を作成します。

<img width="816" height="161" alt="image" src="https://github.com/user-attachments/assets/b5ee58c3-be7c-4e46-896f-b521552e4999" />



@bot.command より上のコードは、あいさつ機能と同じコードのため、説明は省略させていただきます。

<br></br>

### 📗 【11行目】

```python
async def loop(ctx, num: int)
```

- loop 関数にctx, num を引数として渡しています。
- Discord.py は引数をすべて文字列として受け取るため、 `num: int`  でint型へ変換しています。


### 📗 【12行目】

```python
for i in range(num, 0, -1):
```

- num引数から、1までを-1ずつスキップした値をカウント変数 i に代入しています。
- これが今回のループ処理の回数になります。

<br></br>

### 📗 【13行目】

```python
await ctx.send(i)
```

- カウント変数 i をそのチャンネルに送信するコードです。

<br></br>


### 📗 【14行目】

```python
bot.run(TOKEN)
```

- Discord Developer Portal で取得した `TOKEN` を使ってBotを起動します。
- ここでBotがオンライン状態になり、イベントやコマンドを受け取れるようになります。

<br></br>

---

## 🖥️　動作確認

<img width="1114" height="388" alt="image" src="https://github.com/user-attachments/assets/d8f52ba0-1bf7-4e17-9203-c7a3249d8adc" />


<br></br>

- 5 4 3 2 1 と、要素数から1までをカウントダウンできていることが確認できました。
- スパム機能として悪用されそうでしたが、実際に大きい値を入力してみてもメッセージ送信速度が非常に遅かったため、荒らしとしては実用性がないことが判明しました。

---

## 📌 補足
今回作ったコードは、➁ループ.pyにて公開しています。
