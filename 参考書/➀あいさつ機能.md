# 🤖 Discord Bot：あいさつ機能（`!hello`）

## 🔰 初めに  
※このコードは、書籍『📘動かしながら学ぶ Python Discord Bot を作ってプログラミングの基礎を学ぼう』（著：クジラ飛行机）を参考にしながら、  
自分なりに改良・学習用として実装したものです。

---

## 🛠 作成過程  
今回は、特定のメッセージを送信した際に、「こんにちは！」とメッセージを返信するコードを作っていきます。

![コード画像1](https://github.com/user-attachments/assets/31d996d0-f004-441c-ab37-7922a943b192)

最初の二行はこのように記述しました。

<br></br>

### 📗 【一行目】

```python
import discord
```

- `discord.py` というライブラリ全体を**読み込む（インポートする）**という意味  
- Discordとやり取りするためのBot本体・ユーザー・メッセージなどの機能が含まれている

---

### 📗 【二行目】

```python
from discord.ext import commands
```

- `discord.ext` モジュール（＝拡張機能）の中にある `commands` 機能だけを取り出して使えるようにする  
- `commands` は、Botに `!hello` などのコマンドを作るための高機能な仕組み

<br></br>

---

<br></br>
![コード画像2](https://github.com/user-attachments/assets/2b46f4ce-4671-484d-b502-dfe95b26421e)

### 📗 【六行目】

```python
intents = discord.Intents.default()
```

- DiscordのBotが受け取れるイベントの種類（＝Intent）を設定する  
- `Intents.default()` は、メンバー参加・チャンネル更新などの基本的なIntentだけが有効になる初期設定

<br></br>


### 📗 【七行目】

```python
intents.message_content = True
```

- `message_content` を `True` にすることで、ユーザーのテキストメッセージ本文をBotが読み取れるようになる

<br></br>

### 📗 【八行目】

```python
bot = commands.Bot(command_prefix="!", intents=intents)
```

- `command_prefix="!"`：すべてのコマンドは `!` から始まるように設定  
- `intents=intents`：上で設定したIntent（Botが扱える情報）をBotに渡す  
- `commands.Bot(...)`：コマンド機能を持ったBotインスタンスを生成

<br></br>

---

<br></br>

![コード画像3](https://github.com/user-attachments/assets/328ca172-b9b6-4d3c-8de5-0a7a1b354b67)

### 📗 【十行目】

```python
@bot.command()
```

- このデコレーター（@）によって、下の関数が `!hello` のようなコマンドとして使えるようになる

<br></br>

### 📗 【十一行目】

```python
async def hello(ctx):
```

- 非同期関数（async）として `hello` を定義  
- `ctx`（コンテキスト）は、コマンドが送られたチャンネル・ユーザーなどの情報を含んでいる  

💡 **非同期関数とは？**  
→ 時間がかかる処理を待っている間も、他の処理を止めずに並行して動かせる関数のこと！

<br></br>

### 💬 【十二行目】

```python
await ctx.send("こんにちは！")
```

- `ctx.send()`：コマンドが送られたチャンネルにBotがメッセージを送る関数  
- このコードでは、単純に「こんにちは！」と返答するようになっている

<br></br>

### 📗 【十四行目】

```python
bot.run(TOKEN)
```

- Discord Developer Portal で取得した `TOKEN` を使ってBotを起動  
- ここでBotがオンライン状態になり、イベントやコマンドを受け取れるようになる

---

## 📌 補足
今回作ったコードは、➀あいさつ機能.pyにて公開しています。
